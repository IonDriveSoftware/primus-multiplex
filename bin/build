#!/usr/bin/env node

/**
 * Module dependencies.
 */

var fs = require('fs');
var embedder = require('embedder');

embedder({
  "./spark": "lib/client/spark.js",
  "primus-multiplex": "lib/client/index.js"
}, function (err, c) {
  if (err) throw err;
  var code = '';
  code += "(function (Primus) {\n";
  code += "\n'use strict';\n";
  code += "\nvar define = define || null;";
  code += "\nvar require = require || null;\n";
  code += c;
  code += "\nrequire('primus-multiplex');\n";
  code += "\n})(Primus);\n";
  fs.writeFileSync('primus-multiplex.js', code, 'utf-8');
});